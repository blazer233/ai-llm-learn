# LSB é”™è¯¯ç›‘æ§ç³»ç»Ÿ

åŸºäº LSBï¼ˆæœ€ä½æœ‰æ•ˆä½ï¼‰éšå†™æŠ€æœ¯çš„å‰ç«¯é”™è¯¯ç›‘æ§æ–¹æ¡ˆï¼Œä½¿ç”¨ React + Node.js å®ç°ã€‚

## åŠŸèƒ½ç‰¹æ€§

- âœ… ç‚¹å‡»æŒ‰é’®è§¦å‘é”™è¯¯
- âœ… html2canvas è‡ªåŠ¨æˆªå–é¡µé¢
- âœ… LSB ç®—æ³•å°†é”™è¯¯ä¿¡æ¯éšå†™åˆ°å›¾ç‰‡ä¸­
- âœ… ä¸Šä¼ å›¾ç‰‡åˆ° Node.js æœåŠ¡å™¨
- âœ… æœåŠ¡å™¨å­˜å‚¨å›¾ç‰‡åˆ°æœ¬åœ°
- âœ… æä¾›å‘½ä»¤è¡Œè„šæœ¬è§£æå›¾ç‰‡ä¸­çš„é”™è¯¯ä¿¡æ¯
- âœ… Web ç•Œé¢æŸ¥çœ‹å’Œè§£æå·²ä¸Šä¼ çš„å›¾ç‰‡

## é¡¹ç›®ç»“æ„

```
lsb_watermark/
â”œâ”€â”€ client/                # React å‰ç«¯
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ App.jsx       # ä¸»åº”ç”¨ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ utils/
â”‚   â”‚   â”‚   â””â”€â”€ lsb.js    # LSB ç¼–ç ç®—æ³•
â”‚   â”‚   â””â”€â”€ main.jsx
â”‚   â”œâ”€â”€ index.html
â”‚   â”œâ”€â”€ vite.config.js
â”‚   â””â”€â”€ package.json
â”‚
â”œâ”€â”€ server/                # Node.js åç«¯
â”‚   â”œâ”€â”€ index.js          # Express æœåŠ¡å™¨
â”‚   â”œâ”€â”€ decoder.js        # LSB è§£ç ç®—æ³•
â”‚   â”œâ”€â”€ decode-cli.js     # å‘½ä»¤è¡Œè§£æå·¥å…·
â”‚   â”œâ”€â”€ uploads/          # å›¾ç‰‡å­˜å‚¨ç›®å½•ï¼ˆè‡ªåŠ¨åˆ›å»ºï¼‰
â”‚   â””â”€â”€ package.json
â”‚
â”œâ”€â”€ lsb-core.js           # LSB æ ¸å¿ƒç®—æ³•ï¼ˆåŸå§‹ç‰ˆæœ¬ï¼‰
â””â”€â”€ README.md
```

## å®‰è£…ä¾èµ–

### å‰ç«¯ä¾èµ–
```bash
cd client
npm install
```

### åç«¯ä¾èµ–
```bash
cd server
npm install
```

## å¯åŠ¨é¡¹ç›®

### 1. å¯åŠ¨åç«¯æœåŠ¡ï¼ˆç«¯å£ 3000ï¼‰
```bash
cd server
npm start
```

### 2. å¯åŠ¨å‰ç«¯å¼€å‘æœåŠ¡å™¨ï¼ˆç«¯å£ 5173ï¼‰
```bash
cd client
npm run dev
```

### 3. è®¿é—®åº”ç”¨
æ‰“å¼€æµè§ˆå™¨è®¿é—®: http://localhost:5173

## ä½¿ç”¨æ–¹æ³•

### Web ç•Œé¢ä½¿ç”¨

1. æ‰“å¼€æµè§ˆå™¨è®¿é—® http://localhost:5173
2. ç‚¹å‡»"ğŸš¨ è§¦å‘é”™è¯¯å¹¶ä¸ŠæŠ¥"æŒ‰é’®
3. ç³»ç»Ÿè‡ªåŠ¨ï¼š
   - æˆªå–å½“å‰é¡µé¢
   - ä½¿ç”¨ LSB ç®—æ³•å°†é”™è¯¯ä¿¡æ¯éšå†™åˆ°å›¾ç‰‡ä¸­
   - ä¸Šä¼ å›¾ç‰‡åˆ°æœåŠ¡å™¨
4. åœ¨"å·²ä¸Šä¼ çš„å›¾ç‰‡"åŒºåŸŸæŸ¥çœ‹ä¸Šä¼ çš„å›¾ç‰‡
5. ç‚¹å‡»"ğŸ”“ è§£æé”™è¯¯ä¿¡æ¯"æŒ‰é’®æå–å›¾ç‰‡ä¸­çš„éšå†™ä¿¡æ¯

### å‘½ä»¤è¡Œè§£æå›¾ç‰‡

ä½¿ç”¨ç‹¬ç«‹çš„å‘½ä»¤è¡Œå·¥å…·è§£æå›¾ç‰‡ï¼š

```bash
cd server

# è§£ææŒ‡å®šå›¾ç‰‡
node decode-cli.js uploads/error-1234567890.png

# æˆ–ä½¿ç”¨ç›¸å¯¹è·¯å¾„
node decode-cli.js ./uploads/your-image.png

# æˆ–ä½¿ç”¨ç»å¯¹è·¯å¾„
node decode-cli.js /absolute/path/to/image.png
```

**ç¤ºä¾‹è¾“å‡ºï¼š**
```
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ” LSB å›¾ç‰‡è§£æå·¥å…·
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ“ æ–‡ä»¶è·¯å¾„: /path/to/uploads/error-1234567890.png
ğŸ”„ æ­£åœ¨è§£æå›¾ç‰‡...

âœ… è§£ææˆåŠŸï¼

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ“Š æå–çš„é”™è¯¯ä¿¡æ¯:
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

{
  "type": "runtime_error",
  "message": "è¿™æ˜¯ä¸€ä¸ªæµ‹è¯•é”™è¯¯ï¼",
  "timestamp": 1701234567890,
  "url": "http://localhost:5173/",
  "userAgent": "Mozilla/5.0..."
}

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ“ é”™è¯¯æ¶ˆæ¯: è¿™æ˜¯ä¸€ä¸ªæµ‹è¯•é”™è¯¯ï¼
ğŸ• å‘ç”Ÿæ—¶é—´: 2024-12-09 10:30:00
ğŸ”— é¡µé¢åœ°å€: http://localhost:5173/

âœ¨ è§£æå®Œæˆï¼
```

## API æ¥å£

### 1. ä¸Šä¼ å›¾ç‰‡
```
POST /api/upload
Content-Type: multipart/form-data

Body:
- image: å›¾ç‰‡æ–‡ä»¶ï¼ˆpng/jpgï¼‰
- metadata: JSON å­—ç¬¦ä¸²ï¼ˆå¯é€‰ï¼‰

Response:
{
  "success": true,
  "filename": "1234567890-error.png",
  "size": 102400,
  "uploadTime": 1701234567890
}
```

### 2. è·å–å›¾ç‰‡åˆ—è¡¨
```
GET /api/images

Response:
{
  "success": true,
  "images": [
    {
      "filename": "1234567890-error.png",
      "size": 102400,
      "uploadTime": 1701234567890
    }
  ]
}
```

### 3. è§£æå›¾ç‰‡
```
GET /api/decode/:filename

Response:
{
  "success": true,
  "data": {
    "type": "runtime_error",
    "message": "è¿™æ˜¯ä¸€ä¸ªæµ‹è¯•é”™è¯¯ï¼",
    "timestamp": 1701234567890,
    "url": "http://localhost:5173/",
    "userAgent": "Mozilla/5.0..."
  }
}
```

## LSB ç®—æ³•åŸç†

LSBï¼ˆLeast Significant Bitï¼Œæœ€ä½æœ‰æ•ˆä½ï¼‰éšå†™æœ¯æ˜¯ä¸€ç§å°†ä¿¡æ¯éšè—åœ¨å›¾ç‰‡ä¸­çš„æŠ€æœ¯ï¼š

1. **ç¼–ç è¿‡ç¨‹**ï¼š
   - å°†æ¶ˆæ¯è½¬æ¢ä¸ºäºŒè¿›åˆ¶ä½
   - ä¿®æ”¹å›¾ç‰‡åƒç´  RGB é€šé“çš„æœ€ä½ä½
   - ä¸å½±å“å›¾ç‰‡è§†è§‰æ•ˆæœï¼ˆè‚‰çœ¼æ— æ³•å¯Ÿè§‰ï¼‰

2. **è§£ç è¿‡ç¨‹**ï¼š
   - è¯»å–å›¾ç‰‡åƒç´ æ•°æ®
   - æå–æ¯ä¸ªåƒç´  RGB é€šé“çš„æœ€ä½ä½
   - é‡ç»„ä¸ºåŸå§‹æ¶ˆæ¯

3. **å®¹é‡è®¡ç®—**ï¼š
   - æ¯ä¸ªåƒç´ å¯å­˜å‚¨ 3 ä½ï¼ˆRGB å„ 1 ä½ï¼‰
   - æ¯ä¸ªå­—ç¬¦éœ€è¦ 16 ä½
   - å®¹é‡ â‰ˆ (å®½ Ã— é«˜ Ã— 3) / 16 å­—ç¬¦

## æŠ€æœ¯æ ˆ

### å‰ç«¯
- React 18
- Vite
- html2canvasï¼ˆé¡µé¢æˆªå›¾ï¼‰
- åŸç”Ÿ JavaScriptï¼ˆLSB ç¼–ç ï¼‰

### åç«¯
- Node.js
- Expressï¼ˆWeb æœåŠ¡å™¨ï¼‰
- Sharpï¼ˆå›¾ç‰‡å¤„ç†ï¼‰
- Multerï¼ˆæ–‡ä»¶ä¸Šä¼ ï¼‰

## æ³¨æ„äº‹é¡¹

1. **å›¾ç‰‡æ ¼å¼**ï¼šå»ºè®®ä½¿ç”¨ PNG æ ¼å¼ï¼Œé¿å…æœ‰æŸå‹ç¼©å¯¼è‡´éšå†™ä¿¡æ¯ä¸¢å¤±
2. **å›¾ç‰‡å¤§å°**ï¼šå›¾ç‰‡å¿…é¡»è¶³å¤Ÿå¤§ä»¥å®¹çº³é”™è¯¯ä¿¡æ¯
3. **å®¹é‡é™åˆ¶**ï¼šä¸Šä¼ æ–‡ä»¶å¤§å°é™åˆ¶ä¸º 10MB
4. **è·¨åŸŸé—®é¢˜**ï¼šå·²é…ç½® CORSï¼Œå…è®¸è·¨åŸŸè¯·æ±‚

## å¼€å‘è¯´æ˜

### ä¿®æ”¹ç«¯å£

**å‰ç«¯ç«¯å£ï¼ˆé»˜è®¤ 5173ï¼‰ï¼š**
ç¼–è¾‘ `client/vite.config.js`ï¼š
```js
server: {
  port: 5173  // ä¿®æ”¹ä¸ºå…¶ä»–ç«¯å£
}
```

**åç«¯ç«¯å£ï¼ˆé»˜è®¤ 3000ï¼‰ï¼š**
ç¼–è¾‘ `server/index.js`ï¼š
```js
const PORT = 3000;  // ä¿®æ”¹ä¸ºå…¶ä»–ç«¯å£
```

åŒæ—¶æ›´æ–° `client/src/App.jsx` ä¸­çš„ `API_URL`ã€‚

### è°ƒè¯•æ¨¡å¼

å¯åŠ¨å¼€å‘æ¨¡å¼ï¼ˆè‡ªåŠ¨é‡å¯ï¼‰ï¼š
```bash
# åç«¯
cd server
npm run dev

# å‰ç«¯å·²é»˜è®¤ä¸ºå¼€å‘æ¨¡å¼
cd client
npm run dev
```

## License

MIT

# LangGraph 可视化工作流编辑器

🎨 拖拽式 AI Agent 工作流设计器，支持实时执行和可视化反馈。

## ✨ 核心功能

### 1. 可视化编辑
- ✅ 拖拽添加 Agent 节点
- ✅ 连接节点定义执行流程
- ✅ 实时预览工作流图
- ✅ 自由调整布局

### 2. Agent 配置
- ✅ 自定义 Agent 名称
- ✅ 配置系统提示词（System Prompt）
- ✅ 调整 Temperature 参数
- ✅ 支持多种 Agent 类型

### 3. 工作流执行
- ✅ 一键执行工作流
- ✅ 实时状态反馈
- ✅ 节点执行可视化
- ✅ 详细执行日志

### 4. 数据管理
- ✅ 保存工作流为 JSON
- ✅ 加载已保存的工作流
- ✅ 配置持久化

## 🚀 快速开始

### 安装依赖

```bash
cd visualizer
npm install
```

### 启动开发服务器

```bash
npm run dev
```

浏览器自动打开 `http://localhost:5173`

## 📖 使用指南

### 步骤 1: 配置 API

1. 点击右下角执行面板的 ⚙️ 按钮
2. 输入混元 API Key
3. 配置 Base URL（默认已填）
4. 选择模型（hunyuan-lite/standard/pro）
5. 点击"保存配置"

### 步骤 2: 构建工作流

1. **添加起始节点**
   - 从左侧节点面板拖拽 🚀 Start 节点到画布

2. **添加 Agent 节点**
   - 拖拽 📚 Researcher、🔍 Reviewer 或其他 Agent
   - 点击节点配置参数
   - 编辑系统提示词，定义 Agent 行为

3. **添加结束节点**
   - 拖拽 🎉 End 节点

4. **连接节点**
   - 从节点右侧的圆点拖动到下一个节点的左侧圆点
   - 定义执行顺序

### 步骤 3: 执行工作流

1. 点击顶部工具栏的 ▶️ "执行工作流"
2. 观察节点状态变化：
   - ⏳ 运行中
   - ✅ 已完成
   - ❌ 出错
3. 查看底部执行日志

### 步骤 4: 保存和加载

- **保存**: 点击 💾 "保存"，导出 JSON 文件
- **加载**: 点击 📂 "加载"，选择 JSON 文件

## 🎨 可用的 Agent 类型

| Agent | 图标 | 说明 | 用途 |
|-------|------|------|------|
| Start | 🚀 | 起始节点 | 工作流入口，无需配置 |
| Researcher | 📚 | 研究员 | 深入研究主题，生成分析报告 |
| Reviewer | 🔍 | 评审员 | 评审内容质量，提供反馈 |
| Writer | ✍️ | 写作专家 | 将研究内容转化为文章 |
| Custom | ⚙️ | 自定义 | 自定义 Agent 行为 |
| End | 🎉 | 结束节点 | 工作流出口，无需配置 |

## 🔧 配置示例

### Researcher Agent 配置

```
系统提示词：
你是一位专业的研究员。你的任务是：
1. 深入研究给定的主题
2. 提供详细的分析和见解
3. 给出有根据的结论
4. 用清晰、专业的语言表达

Temperature: 0.7
```

### Reviewer Agent 配置

```
系统提示词：
你是一位严谨的评审专家。你的任务是：
1. 仔细评审研究内容的质量
2. 检查逻辑性、完整性和准确性
3. 提供建设性的反馈意见
4. 判断内容是否达到发布标准

Temperature: 0.3
```

## 📊 工作流示例

### 示例 1: 简单研究流程

```
Start → Researcher → End
```

### 示例 2: 研究-评审流程

```
Start → Researcher → Reviewer → Writer → End
```

### 示例 3: 多轮迭代（需要手动实现循环）

```
Start → Researcher → Reviewer → Writer → End
              ↑            |
              └────────────┘
```

## 🎯 高级功能

### 1. 自定义 Agent

创建专门的 Agent：
- 数据分析 Agent
- 代码审查 Agent
- 翻译 Agent
- 摘要 Agent

### 2. 工作流模板

保存常用的工作流配置：
- 论文写作流程
- 代码审查流程
- 内容创作流程
- 研究分析流程

### 3. 批量执行

修改代码支持：
- 多个主题批量处理
- 参数化输入
- 结果批量导出

## 🐛 常见问题

### Q: 节点无法连接？
A: 确保 Start 节点只连接到其他节点，End 节点只被其他节点连接。

### Q: 执行失败提示 API Key 错误？
A: 检查配置面板中的 API Key 是否正确填写。

### Q: 节点一直显示"运行中"？
A: 可能是网络问题或 API 超时，刷新页面重试。

### Q: 如何实现条件分支？
A: 当前版本暂不支持条件分支，后续版本会添加。

## 🔮 路线图

- [ ] 条件分支支持
- [ ] 循环节点支持
- [ ] 更多预置 Agent 类型
- [ ] 工作流模板库
- [ ] 执行历史记录
- [ ] 实时协作编辑
- [ ] 导出为 Python/JavaScript 代码
- [ ] 工作流性能分析

## 📚 技术栈

- **React 18** - UI 框架
- **React Flow 11** - 流程图引擎
- **LangChain.js** - Agent 框架
- **腾讯混元** - 大语言模型
- **Vite** - 构建工具

## 🤝 贡献

欢迎提交 Issue 和 Pull Request！

## 📄 许可

MIT License
